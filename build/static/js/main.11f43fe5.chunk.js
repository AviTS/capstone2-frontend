(this["webpackJsonpbook-app-frontend"]=this["webpackJsonpbook-app-frontend"]||[]).push([[0],{155:function(e,t,r){},174:function(e,t,r){},175:function(e,t,r){},176:function(e,t,r){},177:function(e,t,r){},181:function(e,t){},183:function(e,t){},194:function(e,t){},196:function(e,t){},224:function(e,t){},226:function(e,t){},227:function(e,t){},232:function(e,t){},234:function(e,t){},240:function(e,t){},242:function(e,t){},261:function(e,t){},273:function(e,t){},276:function(e,t){},293:function(e,t,r){},294:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),a=r(144),s=r.n(a),i=(r(155),r(2)),u=r(7),o=r(6),l=r(145),b=r(146),j=r(147),p=r.n(j),d=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_URL||"http://localhost:3001",O=function(){function e(){Object(l.a)(this,e)}return Object(b.a)(e,null,[{key:"request",value:function(){var t=Object(u.a)(Object(i.a)().mark((function t(r){var n,c,a,s,u,o,l=arguments;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},c=l.length>2&&void 0!==l[2]?l[2]:"get",console.debug("API Call:",r,n,c),a="".concat(d,"/").concat(r),s={Authorization:"Bearer ".concat(e.token)},u="get"===c?n:{},t.prev=6,t.next=9,p()({url:a,method:c,data:n,params:u,headers:s});case 9:return t.abrupt("return",t.sent.data);case 12:throw t.prev=12,t.t0=t.catch(6),console.error("API Error:",t.t0.response),o=t.t0.response.data.error.message,Array.isArray(o)?o:[o];case 17:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}()},{key:"getBook",value:function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(t);case 2:return r=e.sent,console.log(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBookList",value:function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("search/q=".concat(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLibrary",value:function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("library/",t,"post");case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLibraries",value:function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("library/getLibraries");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addBooktoLib",value:function(){var e=Object(u.a)(Object(i.a)().mark((function e(t,r){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("library/".concat(t,"/books"),r,"post");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getBooksFromLib",value:function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("library/".concat(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delBookfromLib",value:function(){var e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("library/","delete");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateBookRating",value:function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("library/rating",t,"patch");case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("users/".concat(t));case 2:return r=e.sent,e.abrupt("return",r.user);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("auth/token",t,"post");case 2:return r=e.sent,e.abrupt("return",r.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signup",value:function(){var e=Object(u.a)(Object(i.a)().mark((function e(t){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request("auth/register",t,"post");case 2:return r=e.sent,e.abrupt("return",r.token);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),f=O,h=r(17),v=r(12),m=r(5),x=r(0);var g=function(e){var t=e.type,r=void 0===t?"danger":t,n=e.messages,c=void 0===n?[]:n;return console.debug("Alert","type=",r,"messages=",c),Object(x.jsx)("div",{className:"alert alert-".concat(r),role:"alert",children:c.map((function(e){return Object(x.jsx)("p",{className:"mb-0 small",children:e},e)}))})};var y=function(e){var t=e.login,r=Object(m.f)(),c=Object(n.useState)({username:"",password:""}),a=Object(o.a)(c,2),s=a[0],l=a[1],b=Object(n.useState)([]),j=Object(o.a)(b,2),p=j[0],d=j[1];function O(e){return f.apply(this,arguments)}function f(){return(f=Object(u.a)(Object(i.a)().mark((function e(n){var c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t(s);case 3:(c=e.sent).success?r("/libraries"):d(c.errors);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){var t=e.target,r=t.name,n=t.value;l((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(h.a)({},r,n))}))}return console.debug("LoginForm","login=",typeof t,"formData=",s,"formErrors",p),Object(x.jsxs)("div",{className:"LoginForm",children:[Object(x.jsx)("h3",{className:"mb-3",children:"Log In"}),Object(x.jsx)("div",{className:"card",children:Object(x.jsx)("div",{className:"card-body",children:Object(x.jsxs)("form",{onSubmit:O,children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"Username"}),Object(x.jsx)("input",{name:"username",className:"form-control",value:s.username,onChange:y,autoComplete:"username",required:!0})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"Password"}),Object(x.jsx)("input",{type:"password",name:"password",className:"form-control",value:s.password,onChange:y,autoComplete:"current-password",required:!0})]}),p.length?Object(x.jsx)(g,{type:"danger",messages:p}):null,Object(x.jsx)("button",{type:"submit",className:"btn btn-primary",onSubmit:O,children:"Login"})]})})})]})};var k=function(e){var t=e.signup,r=Object(m.f)(),c=Object(n.useState)({username:"",password:""}),a=Object(o.a)(c,2),s=a[0],l=a[1],b=Object(n.useState)([]),j=Object(o.a)(b,2),p=j[0],d=j[1];function O(e){return f.apply(this,arguments)}function f(){return(f=Object(u.a)(Object(i.a)().mark((function e(n){var c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t(s);case 3:(c=e.sent).success?r("/getbooklist"):d(c.errors);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){var t=e.target,r=t.name,n=t.value;l((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(h.a)({},r,n))}))}return console.debug("SignupForm","signup=",typeof t,"formData=",s,"formErrors=",p),Object(x.jsx)("div",{className:"SignupForm",children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("h2",{className:"mb-3",children:"Sign Up"}),Object(x.jsx)("div",{className:"card",children:Object(x.jsx)("div",{className:"card-body",children:Object(x.jsxs)("form",{onSubmit:O,children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"Username"}),Object(x.jsx)("input",{name:"username",className:"form-control",value:s.username,onChange:y})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"Password"}),Object(x.jsx)("input",{type:"password",name:"password",className:"form-control",value:s.password,onChange:y})]}),p.length?Object(x.jsx)(g,{type:"danger",messages:p}):null,Object(x.jsx)("button",{type:"submit",className:"btn btn-primary",onSubmit:O,children:"Sign up"})]})})})]})})},N=c.a.createContext(),w=r(8);var _=function(){var e=Object(m.f)(),t=Object(n.useState)({library_name:"",library_desc:""}),r=Object(o.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)([]),l=Object(o.a)(s,2),b=(l[0],l[1]);function j(){return(j=Object(u.a)(Object(i.a)().mark((function t(r){var n;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.next=3,f.createLibrary(c);case 3:(n=t.sent)?e("/libraries"):b(n.errors);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(e){var t=e.target,r=t.name,n=t.value;a((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(h.a)({},r,n))}))}return Object(x.jsxs)("div",{className:"LibraryForm",children:[Object(x.jsx)("h3",{className:"mb-3",children:"Create New Library"}),Object(x.jsx)("div",{className:"card",children:Object(x.jsx)("div",{className:"card-body",children:Object(x.jsxs)("form",{onSubmit:function(e){return j.apply(this,arguments)},children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"Name"}),Object(x.jsx)("input",{name:"library_name",className:"form-control",value:c.library_name,onChange:p,autoComplete:"library-name",required:!0})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"Description"}),Object(x.jsx)("input",{name:"library_desc",className:"form-control",value:c.library_desc,onChange:p,autoComplete:"library-desc",required:!0})]}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Create New Library"})]})})})]})},S=r(38);var L=function(e){var t=e.book_id,r=Object(n.useState)(null),c=Object(o.a)(r,2),a=c[0],s=c[1],l=Object(n.useContext)(N).currentUser,b=Object(n.useState)({id:"",title:""}),j=Object(o.a)(b,2),p=j[0],d=j[1],O=Object(m.f)();Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,f.getLibraries(l.user_id);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var g=[];if(a)for(var y=0;y<a.length;y++){var k={id:a[y].library_id,title:a[y].library_name};g.push(k)}function w(e){e.persist(),d((function(t){return Object(v.a)(Object(v.a)({},t),{},Object(h.a)({},e.target.name,e.target.value))}))}function _(){return _=Object(u.a)(Object(i.a)().mark((function e(r){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n=r.target.id.value,!p){e.next=14;break}return e.prev=3,w(r),e.next=7,f.addBooktoLib(+n,{user_id:l.user_id,book_id:t});case 7:O("/library/".concat(n)),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[3,10]])}))),_.apply(this,arguments)}return Object(x.jsx)("div",{children:Object(x.jsxs)("form",{onSubmit:function(e){return _.apply(this,arguments)},children:[Object(x.jsx)("div",{children:Object(x.jsx)("select",{id:"id",name:"id",children:g.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.title},e.id)}))})}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{className:"btn btn-sm btn-primary",children:"Add Book"})})]})})};var C=function(){var e=Object(m.g)().volId,t=(Object(n.useContext)(N).currentUser,Object(n.useState)(null)),r=Object(o.a)(t,2),c=r[0],a=r[1];Object(n.useEffect)((function(){function t(){return(t=Object(u.a)(Object(i.a)().mark((function t(){return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.next=3,f.getBook(e);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),console.log(c);var s=[],l=[];if(c){var b=c.book.author.replace(/["{}']/g,"").split(","),j={title:c.book.title,author:b,genre:c.book.genre,desc:c.book.book_description,img:c.book.cover_img,id:c.book.book_id,extId:c.book.external_book_id};s.push(j),l.push(j.author)}if(c)return Object(x.jsxs)("div",{children:[s?Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:s[0].title}),Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{children:"By:"}),l[0].map((function(e){return Object(x.jsx)("h3",{children:e},e)}))]}),Object(x.jsx)("p",{children:s[0].genre?Object(S.a)(s[0].genre):"Genre not listed."}),Object(x.jsx)("p",{children:s[0].desc?Object(S.a)(s[0].desc):"No description available."})]}):Object(x.jsx)("p",{children:"Book not found"}),Object(x.jsx)("div",{children:Object(x.jsx)(L,{book_id:s[0].id})})]})};r(174);var B=function(e){var t=e.currRating,r=e.book_id,c=e.library_id,a=Object(n.useState)(0),s=Object(o.a)(a,2),l=s[0],b=s[1],j=Object(n.useContext)(N).currentUser.user_id;function p(e){e.persist(),b((function(t){return Object(v.a)(Object(v.a)({},t),{},Object(h.a)({},e.target.id,e.target.id))}))}function d(e){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(n=t.target.id)){e.next=14;break}return e.prev=3,p(t),e.next=7,f.updateBookRating({user_id:j,library_id:+c,book_id:r,rating:+n});case 7:b(+n),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){null!==t&&b(t)}),[]),Object(x.jsx)("div",{className:"star-rating",children:Object(S.a)(Array(5)).map((function(e,t){return t+=1,Object(x.jsx)("button",{type:"button",className:t<=l?"on":"off",onClick:d,id:t,children:Object(x.jsx)("span",{className:"star",id:t,children:"\u2605"})},t)}))})};r(175);var E=function(){Object(n.useContext)(N).currentUser;var e=Object(n.useState)(null),t=Object(o.a)(e,2),r=t[0],c=t[1],a=Object(m.g)().library_id;Object(n.useEffect)((function(){function e(){return e=Object(u.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getBooksFromLib(a);case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var s=[];if(r)for(var l=0;l<r.length;l++){var b=r[l].book_id,j=r[l].title,p=r[l].author,d={id:b,title:j,extBookId:r[l].external_book_id,author:p,rating:r[l].user_rating};s.push(d)}if(r)return Object(x.jsx)("div",{className:"LibBookList",children:r?Object(x.jsx)("div",{className:"BookList-results",children:Object(x.jsx)("ul",{children:s.map((function(e){return Object(x.jsxs)("li",{children:[Object(x.jsx)(w.b,{to:"/getbook/".concat(e.extBookId),children:e.title}),Object(x.jsx)(B,{currRating:e.rating,book_id:e.id,library_id:a})]},e.id)}))})}):Object(x.jsx)("p",{children:"No results"})})};r(176);var U=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),r=t[0],c=t[1],a=Object(n.useContext)(N).currentUser;Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,f.getLibraries(a.user_id);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var s=[];if(r)for(var l=0;l<r.length;l++){var b={id:r[l].library_id,title:r[l].library_name,desc:r[l].library_desc};s.push(b)}return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"LibsList",children:r?Object(x.jsx)("div",{className:"LibList-results",children:Object(x.jsx)("ul",{children:s.map((function(e){return Object(x.jsx)("li",{children:Object(x.jsxs)(w.b,{to:"/library/".concat(e.id),children:[" ",e.title]})},e.id)}))})}):Object(x.jsx)("p",{children:"No results"})}),Object(x.jsx)("div",{children:Object(x.jsx)(w.b,{to:"/newlibrary",children:"Create a New Library"})})]})};var q=function(e){var t=e.login,r=e.signup,c=Object(n.useContext)(N).currentUser;return Object(x.jsxs)("div",{className:"Homepage",children:[Object(x.jsx)("div",{className:"container text-center",children:c?Object(x.jsxs)("h2",{children:["Welcome Back, ",c.username,"!"]}):Object(x.jsxs)("p",{children:[Object(x.jsx)(w.b,{className:"btn btn-primary",to:"/login",children:"Log in"}),Object(x.jsx)(w.b,{className:"btn btn-primary",to:"/signup",children:"Sign up"})]})}),Object(x.jsx)("div",{children:Object(x.jsx)(y,{login:t})}),Object(x.jsx)("div",{children:Object(x.jsx)(k,{signup:r})})]})};var F=function(e){var t=e.searchFor,r=Object(n.useState)(""),c=Object(o.a)(r,2),a=c[0],s=c[1];return Object(x.jsx)("div",{className:"SearchForm",children:Object(x.jsxs)("form",{className:"form-inline",onSubmit:function(e){e.preventDefault(),t(a.trim()||void 0),s(a.trim())},children:[Object(x.jsx)("input",{name:"searchTerm",placeholder:"Enter search term here",value:a,onChange:function(e){s(e.target.value)}}),Object(x.jsx)("button",{type:"submit",className:"btn btn-sm btn-primary",children:"Search"})]})})};r(177);var I=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),r=t[0],c=t[1];function a(e){return s.apply(this,arguments)}function s(){return s=Object(u.a)(Object(i.a)().mark((function e(t){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,void 0===t){e.next=5;break}return e.next=4,f.getBookList(t);case 4:r=e.sent;case 5:c(r);case 6:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}Object(n.useEffect)((function(){a()}),[]);var l=[];if(r)for(var b=0;b<r.results.length;b++){var j={title:r.results[b].book_title,id:r.results[b].external_book_id};l.push(j)}return Object(x.jsxs)("div",{className:"BookList",children:[Object(x.jsx)(F,{searchFor:a}),r?Object(x.jsx)("div",{className:"BookList-results",children:Object(x.jsx)("ul",{children:l.map((function(e){return Object(x.jsxs)("li",{children:[e.title,Object(x.jsx)(w.b,{to:"/getbook/".concat(e.id),children:"View book details"})]},e.id)}))})}):Object(x.jsx)("p",{children:"No results"})]})};var A=function(e){var t=e.login,r=e.signup;return Object(x.jsx)("div",{children:Object(x.jsxs)(m.c,{children:[Object(x.jsx)(m.a,{exact:!0,path:"/",element:Object(x.jsx)(q,{login:t,signup:r})}),Object(x.jsx)(m.a,{exact:!0,path:"/getbook/:volId",element:Object(x.jsx)(C,{})}),Object(x.jsx)(m.a,{exact:!0,path:"/getbooklist",element:Object(x.jsx)(I,{})}),Object(x.jsx)(m.a,{exact:!0,path:"/libraries/",element:Object(x.jsx)(U,{})}),Object(x.jsx)(m.a,{exact:!0,path:"/newlibrary/",element:Object(x.jsx)(_,{})}),Object(x.jsx)(m.a,{exact:!0,path:"/library/:library_id",element:Object(x.jsx)(E,{})})]})})};var D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=localStorage.getItem(e)||t,c=Object(n.useState)(r),a=Object(o.a)(c,2),s=a[0],i=a[1];return Object(n.useEffect)((function(){null===s?localStorage.removeItem(e):localStorage.setItem(e,s)}),[e,s]),[s,i]},P=r(148),R=r.n(P);var T=function(e){var t=e.logout,r=Object(n.useContext)(N).currentUser;return Object(x.jsxs)("nav",{className:"Navigation navbar",children:[Object(x.jsx)(w.b,{className:"navbar-a",to:"/",children:"Home"}),r?Object(x.jsxs)("ul",{className:"navbar-nav",children:[Object(x.jsx)("li",{className:"navbar-item",children:Object(x.jsx)(w.c,{className:"nav-link",to:"/getbooklist",children:"Search"})}),Object(x.jsx)("li",{className:"navbar-item",children:Object(x.jsx)(w.c,{className:"nav-link",to:"/libraries",children:"Your Libraries"})}),Object(x.jsx)("li",{className:"navbar-item",children:Object(x.jsx)(w.b,{className:"nav-link",to:"/",onClick:t,children:"Log out"})})]}):Object(x.jsxs)("ul",{className:"navbar-nav",children:[Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(w.c,{className:"nav-link",to:"/login",children:"Log In"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(w.c,{className:"nav-link",to:"/signup",children:"Sign Up"})})]})]})};r(293);var H=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)(null),s=Object(o.a)(a,2),l=s[0],b=s[1],j=D("bookapp-token"),p=Object(o.a)(j,2),d=p[0],O=p[1];function h(){return(h=Object(u.a)(Object(i.a)().mark((function e(t){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.signup(t);case 3:return r=e.sent,O(r),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),console.error("signup failed",e.t0),e.abrupt("return",{success:!1,errors:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function v(){return(v=Object(u.a)(Object(i.a)().mark((function e(t){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.login(t);case 3:return r=e.sent,O(r),e.abrupt("return",{success:!0});case 8:return e.prev=8,e.t0=e.catch(0),console.error("login failed",e.t0),e.abrupt("return",{success:!1,errors:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}if(Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(Object(i.a)().mark((function e(){var t,r,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=14;break}return e.prev=1,t=R.a.decode(d),r=t.username,f.token=d,e.next=6,f.getCurrentUser(r);case 6:n=e.sent,b(n),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("App loadUserInfo: problem loading",e.t0),b(null);case 14:c(!0);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}c(!1),function(){e.apply(this,arguments)}()}),[d]),r)return Object(x.jsx)(N.Provider,{value:{currentUser:l,setCurrentUser:b},children:Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(T,{logout:function(){b(null),O(null)}}),Object(x.jsx)(A,{login:function(e){return v.apply(this,arguments)},signup:function(e){return h.apply(this,arguments)}})]})})},W=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,295)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))};s.a.createRoot(document.getElementById("root")).render(Object(x.jsx)(w.a,{children:Object(x.jsx)(H,{})})),W()}},[[294,1,2]]]);
//# sourceMappingURL=main.11f43fe5.chunk.js.map